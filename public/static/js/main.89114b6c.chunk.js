(this["webpackJsonptours-app-client"]=this["webpackJsonptours-app-client"]||[]).push([[0],{47:function(t,e,n){},76:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(21),c=n.n(o),s=(n(47),n(22)),i=n(42),l=n(9),u=n(10),d=n(12),j=n(11),h=(n(48),n(4)),p=n(14),b=n.n(p),O="https://hack-tours.herokuapp.com",f=n(79),m=n(80),g=n(6),x=n(1);var v=function(t){return Object(x.jsxs)(f.a,{bg:"light",expand:"lg",children:[Object(x.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(x.jsx)(f.a.Collapse,{id:"basic-navbar-nav",children:Object(x.jsx)(m.a,{className:"mr-auto",children:t.user?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{onClick:t.onLogout,children:"Logout"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/",children:"Home"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/tourlist",children:"Tours"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/addform",children:"Create Tour"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/profile",children:"Profile"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/",children:"Home"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/tourlist",children:"Tours"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/addform",children:"Create Tour"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/signin",children:"SignIn"}),Object(x.jsx)(g.b,{style:{marginLeft:"10px"},to:"/signup",children:"SignUp"})]})})})]})};var y=function(t){return Object(x.jsxs)("form",{onSubmit:t.onSignIn,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(x.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(x.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),t.error?Object(x.jsx)("h4",{children:t.error.errorMessage}):null,Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})};var S=function(t){return Object(x.jsxs)("form",{onSubmit:t.onSignUp,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputUsername",children:"Username"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"InputUsername",name:"username"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputEmail",children:"Email address"}),Object(x.jsx)("input",{type:"email",className:"form-control",id:"InputEmail",name:"email"}),Object(x.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"InputPassword",children:"Password"}),Object(x.jsx)("input",{name:"password",type:"password",className:"form-control",id:"InputPassword"})]}),t.error?Object(x.jsx)("h4",{children:t.error.errorMessage}):null,Object(x.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},C=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Profile"})})}}]),n}(a.Component),I=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.tourlist;return console.log("This is the tourlist",t),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Tours List"}),t.map((function(t){return Object(x.jsx)(g.b,{to:"/tourDetails/".concat(t._id),children:Object(x.jsx)("div",{children:t.title},t._id)},t._id)}))]})}}]),n}(a.Component),w=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={tours:{}},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.tourId;b.a.get("".concat(O,"/api/tours/").concat(e)).then((function(e){console.log(e.data),t.setState({tours:e.data})})).catch((function(){console.log("Fecthing failed")}))}},{key:"render",value:function(){var t=this.state.tours,e=this.props,n=(e.onEdit,e.onDelete);return Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Details"}),Object(x.jsxs)("div",{children:["Title: ",t.title]}),Object(x.jsxs)("div",{children:["Description: ",t.description]}),Object(x.jsxs)("div",{children:["Date: ",t.date]}),Object(x.jsxs)("div",{children:["Location: ",t.location]}),Object(x.jsx)("button",{children:Object(x.jsx)(g.b,{to:"/editform/".concat(t._id),children:"Edit"})}),Object(x.jsx)("button",{onClick:function(){return n(t._id)},children:"Delete"})]})}}]),n}(a.Component),D=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsxs)("form",{onSubmit:this.props.onAdd,children:[Object(x.jsx)("input",{name:"title",type:"text",placeholder:"Enter title"}),Object(x.jsx)("input",{name:"location",type:"text",placeholder:"Enter Location"}),Object(x.jsx)("input",{name:"description",type:"text",placeholder:"Enter desc"}),Object(x.jsx)("input",{name:"date",type:"date",class:"form-control",placeholder:"Enter date"}),Object(x.jsx)("button",{type:"submit",children:"Submit"})]})})}}]),n}(a.Component),N=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={tours:{}},t.handleTitleChange=function(e){var n=e.target.value;console.log(n);var a=JSON.parse(JSON.stringify(t.state.tour));a.title=n,t.setState({tours:a})},t.handleDescChange=function(e){var n=e.target.value,a=JSON.parse(JSON.stringify(t.state.tour));a.description=n,t.setState({tour:a})},t.handleLocationChange=function(e){var n=e.target.value;console.log(n);var a=JSON.parse(JSON.stringify(t.state.tour));a.location=n,t.setState({tour:a})},t.handleDateChange=function(e){var n=e.target.value;console.log(n);var a=JSON.parse(JSON.stringify(t.state.tour));a.date=date,t.setState({tour:a})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.tourId;b.a.get("".concat(O,"/api/tours/").concat(e)).then((function(e){t.setState({tours:e.data})})).catch((function(){console.log("Detail fecth failed")}))}},{key:"render",value:function(){var t=this.state.tours,e=this.props.onEdit;return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:this.handleTitleChange,value:t.title}),Object(x.jsx)("input",{type:"text",onChange:this.handleDescChange,value:t.description}),Object(x.jsx)("input",{type:"text",onChange:this.handleLocationChange,value:t.location}),Object(x.jsx)("input",{type:"text",onChange:this.handleDateChange,value:t.date}),Object(x.jsx)("button",{onClick:function(){e(t)},children:"Submit"})]})}}]),n}(a.Component),L=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"Home page"})})}}]),n}(a.Component),E=function(t){Object(d.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={tours:[],loggedInUser:null,error:null},t.handleSubmit=function(e){e.preventDefault();var n=e.target.title.value,a=e.target.description.value,r=e.target.location.value,o=e.target.date.value;console.log("name",n,"desc",a,"loc",r,"date",Date.parse(o)),b.a.post("".concat(O,"/api/create"),{title:n,description:a,location:r,date:Date.parse(o)}).then((function(e){t.setState({tours:[e.data].concat(Object(i.a)(t.state.tours))},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Failed to create",t)}))},t.handleDelete=function(e){b.a.delete("".concat(O,"/api/tours/").concat(e)).then((function(){var n=t.state.tours.filter((function(t){return t._id!==e}));t.setState({tours:n},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Delete failed",t)}))},t.handleEditTour=function(e){b.a.patch("".concat(O,"/api/tours/").concat(e._id),{title:e.title,description:e.description,location:e.location,date:e.date}).then((function(){var n=t.state.tours.map((function(t){return e._id===t._id&&(t.name=e.name,t.description=e.description,t.location=e.location,t.date=e.date),t}));t.setState({tours:n},(function(){t.props.history.push("/")}))})).catch((function(t){console.log("Edit failed",t)}))},t.handleSignUp=function(e){e.preventDefault();var n={username:e.target.username.value,email:e.target.email.value,password:e.target.password.value};b.a.post("".concat(O,"/api/signup"),n).then((function(e){t.setState({loggedInUser:null},(function(){t.props.history.push("/")}))})).catch((function(t){console.log(t)}))},t.handleSignIn=function(e){e.preventDefault();var n={email:e.target.email.value,password:e.target.password.value};b.a.post("".concat(O,"/api/signin"),n,{withCredentials:!0}).then((function(e){t.setState({loggedInUser:e.data},(function(){t.props.history.push("/profile")}))})).catch((function(e){console.log("Something went wrong",e),t.setState({error:e.response.data})}))},t.handleLogout=function(){b.a.post("".concat(O,"/api/logout"),{},{withCredentials:!0}).then((function(){t.setState({loggedInUser:null},(function(){t.props.history.push("/")}))}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;b.a.get("".concat(O,"/api/tours")).then((function(e){console.log("This is the response",e.data),t.setState({tours:e.data})})).catch((function(){console.log("Details Fecth failed")})),this.state.loggedInUser||b.a.get("".concat(O,"/api/user"),{withCredentials:!0}).then((function(e){t.setState({loggedInUser:e.data})})).catch((function(){}))}},{key:"render",value:function(){var t=this;return Object(x.jsxs)("div",{children:[Object(x.jsx)(v,{onLogout:this.handleLogout,user:this.state.loggedInUser}),Object(x.jsxs)(h.c,{children:[Object(x.jsx)(h.a,{exact:!0,path:"/",render:function(t){return Object(x.jsx)(L,{})}}),Object(x.jsx)(h.a,{path:"/addform",render:function(e){return Object(x.jsx)(D,{onAdd:t.handleSubmit})}}),Object(x.jsx)(h.a,{path:"/editform/:tourId/",render:function(t){return Object(x.jsx)(N,Object(s.a)({},t))}}),Object(x.jsx)(h.a,{path:"/tourlist",render:function(e){return Object(x.jsx)(I,{tourlist:t.state.tours})}}),Object(x.jsx)(h.a,{path:"/profile",render:function(t){return Object(x.jsx)(C,{})}}),Object(x.jsx)(h.a,{path:"/tourDetails/:tourId",render:function(e){return Object(x.jsx)(w,Object(s.a)({onDelete:t.handleDelete,onEdit:t.handleEditTour},e))}}),Object(x.jsx)(h.a,{path:"/signin",render:function(e){return Object(x.jsx)(y,Object(s.a)({error:t.state.error,onSignIn:t.handleSignIn},e))}}),Object(x.jsx)(h.a,{path:"/signup",render:function(e){return Object(x.jsx)(S,Object(s.a)({error:t.state.error,onSignUp:t.handleSignUp},e))}})]})]})}}]),n}(a.Component),k=Object(h.f)(E);c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(g.a,{children:Object(x.jsx)(k,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.89114b6c.chunk.js.map